define("app/ui/timelines/with_load_more_pagination",["module","require","exports","core/compose","app/ui/timelines/with_old_items"],function(module, require, exports) {
function withLoadMorePagination(){compose.mixin(this,[withOldItems]),this.defaultAttrs({loadMoreSelector:".btn-load-more",streamLoadingSelector:".stream-loading"}),this.loadMoreClicked=function(a,b){this.trigger("uiLoadMoreClicked"),a.preventDefault(),this.getOldItems(a),this.select("loadMoreSelector").hide(),this.select("streamLoadingSelector").show()},this.handleMoreItems=function(a,b){b.has_more_items&&this.select("loadMoreSelector").show(),this.select("streamLoadingSelector").hide()},this.after("initialize",function(){this.on("click",{loadMoreSelector:this.loadMoreClicked}),this.on(document,"dataGotMoreTimelineItems",this.handleMoreItems),this.select("streamLoadingSelector").hide()})}var compose=require("core/compose"),withOldItems=require("app/ui/timelines/with_old_items");module.exports=withLoadMorePagination
});
define("app/ui/timelines/with_dismissible_recommendation",["module","require","exports","core/compose","app/ui/with_interaction_data"],function(module, require, exports) {
function withDismissibleRecommendation(){compose.mixin(this,[withInteractionData]),this.defaultAttrs({dismissSelector:".js-dismiss-recommendation",tweetSelector:".js-stream-tweet",userSelector:".account"}),this.dismissRecommendation=function(a,b){var c=$(a.target).closest(this.attr.genericItemSelector);c.fadeOut();var d=this.getUserIdFromStreamItem(c);this.trigger("uiDismissUserRecommendation",{recommended_user_id:d,excluded:[d]})},this.handleDismissResponse=function(a,b){var c=b.sourceEventData.recommended_user_id;if(c){var d=this.getStreamItemById(c),e=this.interactionData(d,{userId:c,itemType:"user"});d.remove(),this.trigger("uiDidDismissUserRecommendation",{oldUser:e})}},this.getStreamItemById=function(a){switch(this.attr.itemType){case"tweet":var b=this.$node.find(this.attr.tweetSelector+'[data-user-id="'+a+'"]');return b.closest(this.attr.genericItemSelector);case"user":return this.$node.find(this.attr.genericItemSelector+'[data-item-id="'+a+'"]');default:console.warn('You must configure your dismissible timeline component with an "itemType" attribute of user or tweet.');return}},this.getUserIdFromStreamItem=function(a){switch(this.attr.itemType){case"tweet":return a.find(this.attr.tweetSelector).data("user-id");case"user":return a.find(this.attr.userSelector).data("user-id");default:console.warn('You must configure your dismissible timeline component with an "itemType" attribute of user or tweet.');return}},this.after("initialize",function(){this.on("click",{dismissSelector:this.dismissRecommendation}),this.on(document,"dataDidDismissRecommendation",this.handleDismissResponse)})}var compose=require("core/compose"),withInteractionData=require("app/ui/with_interaction_data");module.exports=withDismissibleRecommendation
});
define("app/ui/timelines/dismissible_timeline",["module","require","exports","core/component","app/ui/timelines/base_timeline","app/ui/timelines/with_cursor_pagination","app/ui/timelines/with_load_more_pagination","app/ui/timelines/with_old_items","app/ui/timelines/with_excluded_ids_pagination","app/ui/timelines/with_dismissible_recommendation","app/ui/with_item_actions","app/ui/with_user_actions","core/utils"],function(module, require, exports) {
function dismissibleTimeline(){this.defaultAttrs({followingStreamItemClass:"DismissibleStreamItem--following",followPendingStreamItemClass:"DismissibleStreamItem--pending",followingState:"following",unfollowingState:"not-following",pendingFollowState:"pending",useExcludedIdsPagination:!0,excludedUserSelector:".js-stream-tweet"}),this.showFollowState=function(a,b){this.toggleStreamItem(a,utils.merge(b,{newState:this.attr.followingState}))},this.showUnfollowState=function(a,b){this.toggleStreamItem(a,utils.merge(b,{newState:this.attr.unfollowingState}))},this.toggleStreamItem=function(a,b){var c=this.getStreamItemById(b.userId);switch(b.newState){case this.attr.followingState:c.addClass(this.attr.followingStreamItemClass);break;case this.attr.pendingFollowState:c.addClass(this.attr.followPendingStreamItemClass);break;default:c.removeClass(this.attr.followingStreamItemClass),c.removeClass(this.attr.followPendingStreamItemClass)}},this.onFollowAllSuccess=function(a,b){this.updateUserFollowStates(b.result.followed,this.attr.followingState),this.updateUserFollowStates(b.result.requested,this.attr.pendingFollowState)},this.updateUserFollowStates=function(a,b){a.forEach(function(a){this.trigger(document,"uiFollowStateChange",{userId:a,newState:b,itemType:"user"})}.bind(this))},this.after("initialize",function(){this.on(document,"uiFollowAction",this.showFollowState),this.on(document,"uiUnfollowAction",this.showUnfollowState),this.on(document,"uiFollowStateChange dataFollowStateChange dataBulkFollowStateChange",this.toggleStreamItem),this.on(document,"dataFollowAllSuccess",this.onFollowAllSuccess)})}var defineComponent=require("core/component"),BaseTimeline=require("app/ui/timelines/base_timeline"),withCursorPagination=require("app/ui/timelines/with_cursor_pagination"),withLoadMorePagination=require("app/ui/timelines/with_load_more_pagination"),withOldItems=require("app/ui/timelines/with_old_items"),withExcludedIdsPagination=require("app/ui/timelines/with_excluded_ids_pagination"),withDismissibleRecommendation=require("app/ui/timelines/with_dismissible_recommendation"),withItemActions=require("app/ui/with_item_actions"),withUserActions=require("app/ui/with_user_actions"),utils=require("core/utils");module.exports=BaseTimeline.mixin(dismissibleTimeline,withCursorPagination,withLoadMorePagination,withOldItems,withExcludedIdsPagination,withItemActions,withUserActions,withDismissibleRecommendation)
});
define("app/ui/pushstate_loading_bar",["module","require","exports","core/component"],function(module, require, exports) {
function pushstateLoadingBar(){this.defaultAttrs({pageSelector:"body",loadingSelectorClass:".PushstateLoadingBar",modifierClass:"",hideDelay:1e3}),this.showProgress=function(a,b){this.insertLoader(),setTimeout(function(){var a=25+Math.random()*50;this.$loader.css("width",a+"%")}.bind(this),0)},this.completeProgress=function(a,b){this.$loader&&(this.$loader.css("width","100%"),this.$loader.delay(this.attr.hideDelay).fadeOut(function(){this.$loader.remove()}.bind(this)))},this.insertLoader=function(){var a=this.attr.loadingSelectorClass.replace(".","");$(this.attr.pageSelector).append('<div class="'+a+'"></div>'),this.$loader=this.select("loadingSelectorClass"),this.$loader.addClass(this.attr.modifierClass)},this.after("initialize",function(){this.on(document,"uiShowGlobalLoadingIndicator",this.showProgress),this.on(document,"uiHideGlobalLoadingIndicator",this.completeProgress)})}var defineComponent=require("core/component");module.exports=defineComponent(pushstateLoadingBar)
});
define("app/ui/start/follow_context",["module","require","exports","core/component","template"],function(module, require, exports) {
function followContext(){this.defaultAttrs({numUsersToShow:5}),this.renderUsers=function(a,b){var c=b.users.slice(this.attr.numUsersToShow*-1);this.$node.empty();for(var d=0;d<this.attr.numUsersToShow;d++)this.renderUser(c[d])},this.renderUser=function(a){this.$node.append(template["start/follow_context"].render({user:a},template))},this.after("initialize",function(){this.on(document,"dataFollowContextChange dataFollowContextLoaded",this.renderUsers)})}var defineComponent=require("core/component"),template=require("template");module.exports=defineComponent(followContext)
});
define("app/data/start/follow_context",["module","require","exports","core/component","app/utils/storage/custom"],function(module, require, exports) {
function followContext(){this.defaultAttrs({counterName:"follow_counter",maxUsers:50}),this.handleFollowStateChange=function(a,b){var c=b.user;b.newState=="not-following"?this.removeUser(c):this.addUser(c),this.trigger("dataFollowContextChange",{users:this.storage.getArray(this.attr.counterName)})},this.removeUser=function(a){var b=this.storage.getArray(this.attr.counterName),c=b.filter(function(b){return b.id!=a.id});this.storage.setItem(this.attr.counterName,c)},this.addUser=function(a){var b={id:a.id,profile_url:a.profile_image_url_https,screen_name:a.screen_name};this.storage.push(this.attr.counterName,b)},this.triggerFollowContextLoaded=function(){this.trigger("dataFollowContextLoaded",{users:this.storage.getArray(this.attr.counterName)})},this.after("initialize",function(){var a=customStorage({withArray:!0,withMaxElements:!0});this.storage=new a("nux_follow_context"),this.storage.setMaxElements(this.attr.counterName,this.attr.maxUsers),this.on("uiSwiftLoaded uiPageChanged",this.triggerFollowContextLoaded),this.on("dataFollowContextProxyChange",this.handleFollowStateChange)})}var defineComponent=require("core/component"),customStorage=require("app/utils/storage/custom");module.exports=defineComponent(followContext)
});
define("app/ui/start/navigation_monitor",["module","require","exports","core/component"],function(module, require, exports) {
function navigationMonitor(){this.defaultAttrs({linkSelector:".stream-items a, #profile_popup-dialog a"}),this.checkNavAttempt=function(a,b){var c,d;if(this.isCompleted||a.shiftKey||a.ctrlKey||a.metaKey||a.which!==undefined&&a.which>1)return;c=$(a.target),d=c.closest("a"),d.length&&!a.isDefaultPrevented()&&d.attr("href")&&(a.preventDefault(),a.stopImmediatePropagation(),this.trigger("uiWantsConfirmLeaveDialog",{href:d.attr("href")}))},this.after("initialize",function(){this.on("click",{linkSelector:this.checkNavAttempt})})}var defineComponent=require("core/component");module.exports=defineComponent(navigationMonitor)
});
define("app/ui/start/exit_confirm_dialog",["module","require","exports","core/component","app/ui/with_dialog"],function(module, require, exports) {
function exitConfirmDialog(){this.defaultAttrs({exitFlowSelector:".js-exit-action"}),this.openDialog=function(a,b){this.exitHref=b.href,this.open()},this.reallyLeave=function(a,b){window.location.href=this.exitHref},this.after("initialize",function(){this.on("click",{exitFlowSelector:this.reallyLeave}),this.on(document,"uiWantsConfirmLeaveDialog",this.openDialog)})}var defineComponent=require("core/component"),withDialog=require("app/ui/with_dialog"),ExitConfirmDialog=defineComponent(exitConfirmDialog,withDialog);module.exports=ExitConfirmDialog
});
define("app/data/start_flow_scribe",["module","require","exports","core/component","app/data/with_scribe","app/ui/track_ga_events"],function(module, require, exports) {
function StartFlowScribe(){this.defaultAttrs({exitDialogSelector:"#start-exit-dialog",interestsGridItemSelector:".BlockGrid-item",skipStepSelector:".js-skip-step",completeStepSelector:".js-complete-step",continueSelector:".js-continue-step",flowExitSelector:".js-exit-action",closePreviewSelector:".StartPreviewLinks-link.js-close",previewStepLinkSelector:".StartPreviewLinks-button"}),this.scribeCompleteStep=function(a,b){this.scribe({component:"progress",action:"done"})},this.scribeContinueStep=function(a,b){this.scribe({component:"progress",action:"continue"})},this.scribeStepSkip=function(a,b){this.scribe({component:"progress",action:"skip"})},this.scribeInterestsGridClick=function(a,b){this.scribe({component:"suggestion_category",action:"click"})},this.scribeImportStepComplete=function(a,b){b.done&&this.scribe({section:"import",component:"progress",action:"done"})},this.scribeFlowExit=function(a,b){this.scribe({component:"progress",action:"cancel"}),this.trigger("GATrackEvent",{gaEvent:"NUX-not-complete"})},this.scribeDialogOpen=function(a,b){this.scribe({component:"exit_dialog",action:"open"})},this.scribeDialogClose=function(a,b){this.scribe({component:"exit_dialog",action:"close"})},this.scribeStepNav=function(a,b){this.scribe({component:"preview_timeline",element:$(a.target).attr("data-nav"),action:"nav"}),this.trigger("GATrackEvent",{gaEvent:"complete-NUX"})},this.scribeContinueAfterComplete=function(a,b){this.scribe({component:"preview_timeline",action:"close"})},this.followAllScribe=function(a,b){var c=b.result&&b.result.requested?b.result.requested.length:0,d=b.result&&b.result.followed?b.result.followed.length:0;c+d==0?this.scribe({component:"progress",action:"skip"}):(this.scribe({component:"user",action:"follow_all"},{event_value:c+d}),this.scribe({component:"progress",action:"done"}))},this.after("initialize",function(){this.on("click",{interestsGridItemSelector:this.scribeInterestsGridClick,completeStepSelector:this.scribeCompleteStep,continueSelector:this.scribeContinueStep,skipStepSelector:this.scribeStepSkip,flowExitSelector:this.scribeFlowExit,previewStepLinkSelector:this.scribeStepNav,closePreviewSelector:this.scribeContinueAfterComplete}),this.on("uiDialogOpened",{exitDialogSelector:this.scribeDialogOpen}),this.on("uiDialogClosed",{exitDialogSelector:this.scribeDialogClose}),this.on("dataContactImportStatusSuccess",this.scribeImportStepComplete),this.scribeOnEvent("uiStartFollowStepComplete",{section:"interests",component:"progress",action:"done"}),this.on("dataFollowAllSuccess",this.followAllScribe),this.scribeOnEvent("dataFollowAllFailure",{component:"user",element:"follow_all",action:"failure"}),this.scribeOnEvent("dataTweetError",{component:"first_tweet",action:"failure"}),this.scribeOnEvent("uiStartFlowComplete uiTweetboxTweetSuccess",{component:"progress",action:"done"}),this.scribeOnEvent("uiStartFlowComplete uiTweetboxTweetSuccess",{component:"progress",action:"complete"}),this.scribeOnEvent("uiNeedsPreviewTimeline",{component:"preview_timeline",action:"open"}),GATrackEvent.attachTo(".StartPreviewLinks .js-skip-step")})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe"),GATrackEvent=require("app/ui/track_ga_events");module.exports=defineComponent(StartFlowScribe,withScribe)
});
define("app/data/start/tooltip_scribe",["module","require","exports","core/component","app/data/with_scribe"],function(module, require, exports) {
function toolTipScribe(){this.defaultAttrs({componentName:"tooltip"}),this.scribeTooltipShow=function(a,b){var c=$(a.target);this.scribe({component:this.attr.componentName,action:"show"},{event_value:c.text().trim()})},this.after("initialize",function(){this.on(document,"uiTooltipShow",this.scribeTooltipShow)})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(toolTipScribe,withScribe)
});
define("app/data/users",["module","require","exports","core/component","app/data/with_data"],function(module, require, exports) {
function users(){this.getUsers=function(a,b){var c={ids:b.ids};this.get({url:"/i/users/html",data:c,eventData:b,success:"dataUsersSuccess",error:"dataUsersError"})},this.after("initialize",function(){this.on("uiGetUsers",this.getUsers)})}var defineComponent=require("core/component"),withData=require("app/data/with_data");module.exports=defineComponent(users,withData)
});
define("app/ui/start/preview_timeline",["module","require","exports","core/component","core/i18n"],function(module, require, exports) {
function previewTimeline(){this.displayPreview=function(a,b){this.trigger("uiOverlayOpen"),this.trigger("uiNeedsPreviewTimeline",{interests_completed:b.interestsCompleted})},this.updatePreviewTimeline=function(a,b){this.trigger("uiOverlayUpdate",b)},this.handleFailure=function(a,b){this.trigger("uiShowMessage",{message:_('\u7533\u3057\u8a33\u3042\u308a\u307e\u305b\u3093\u3002\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u518d\u5ea6\u3001\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002')}),this.trigger("uiOverlayClose")},this.after("initialize",function(){this.on("uiShowPreviewTimeline",this.displayPreview),this.on(document,"uiUpdatePreviewTimeline",this.updatePreviewTimeline),this.on(document,"uiUpdatePreviewTimelineFailed",this.handleFailure)})}var defineComponent=require("core/component"),_=require("core/i18n");module.exports=defineComponent(previewTimeline)
});
define("app/data/start/preview_timeline",["module","require","exports","core/component","core/utils","app/data/with_data"],function(module, require, exports) {
function previewTimeline(){this.defaults={endpoint:"/i/start/preview_timeline",noShowError:!0},this.getPreviewTimeline=function(a,b){this.JSONRequest({type:"GET",url:this.attr.endpoint,dataType:"json",data:b,eventData:b,success:"uiUpdatePreviewTimeline",error:"uiUpdatePreviewTimelineFailed"})},this.after("initialize",function(){this.on(document,"uiNeedsPreviewTimeline",this.getPreviewTimeline)})}var defineComponent=require("core/component"),utils=require("core/utils"),withData=require("app/data/with_data");module.exports=defineComponent(previewTimeline,withData)
});
define("app/ui/start/preview_timeline_button",["module","require","exports","core/component"],function(module, require, exports) {
function previewTimelineBtn(){this.defaultAttrs({completedClass:"is-completed",previewClass:"primary-btn",hasImported:!1,interestsFollowingCount:0,requiredInterestsFollowingCount:5}),this.updateFollowingState=function(a,b){this.attr.interestsFollowingCount=b.users.length,this.triggerCompletionState()},this.updateButtonState=function(){var a=this.isCompleted();this.$node.toggleClass(this.attr.completedClass,a),this.$node.toggleClass(this.attr.previewClass,!a)},this.updateImportState=function(a,b){b.done&&(this.attr.hasImported=!0,this.triggerCompletionState())},this.isCompleted=function(){return this.isInterestsFollowsCompleted()&&this.attr.hasImported},this.isInterestsFollowsCompleted=function(){return this.attr.interestsFollowingCount>=this.attr.requiredInterestsFollowingCount},this.onButtonClick=function(){this.isCompleted()?(window.location.href="/",this.trigger("GATrackEvent",{gaEvent:"complete-NUX"})):this.triggerPreviewTimeline()},this.triggerPreviewTimeline=function(){this.trigger("uiShowPreviewTimeline",{interestsCompleted:this.isInterestsFollowsCompleted()})},this.triggerCompletionState=function(){this.trigger("uiNuxCompletionStateChanged",{completed:this.isCompleted()})},this.possiblyTriggerPreviewTimeline=function(){var a=this.attr.interestsFollowingCount==this.attr.requiredInterestsFollowingCount;a&&!this.hasTriggeredCompletionFollow&&(this.hasTriggeredCompletionFollow=!0,this.trigger("uiStartFollowStepComplete")),this.isCompleted()&&a&&!this.hasTriggeredPreview&&(this.hasTriggeredPreview=!0,this.trigger("uiStartFlowComplete"),this.triggerPreviewTimeline())},this.after("initialize",function(){this.on(document,"uiSwiftLoaded uiPageChanged",this.triggerCompletionState),this.on("click",this.onButtonClick),this.on("uiNuxCompletionStateChanged",this.updateButtonState),this.on(document,"dataFollowContextChange dataFollowContextLoaded",this.updateFollowingState),this.on(document,"dataFollowContextChange",this.possiblyTriggerPreviewTimeline),this.on(document,"dataContactImportStatusSuccess",this.updateImportState)})}var defineComponent=require("core/component");module.exports=defineComponent(previewTimelineBtn)
});
define("app/ui/contact_import_buttons",["module","require","exports","core/component","app/data/with_scribe"],function(module, require, exports) {
function ContactImportButtons(){this.defaultAttrs({toggleSelector:".ContactImportButtons-toggle"}),this.toggle=function(a,b){a.preventDefault();var c=this.$node.hasClass("ContactImportButtons--showSingleService")?"multi_import":"single_import";this.$node.addClass("ContactImportButtons--transition").toggleClass("ContactImportButtons--showSingleService").toggleClass("ContactImportButtons--showMultipleServices"),this.scribe({component:"import_button",element:c,action:"click"})},this.after("initialize",function(){this.on(this.attr.toggleSelector,"click",this.toggle)})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(ContactImportButtons,withScribe)
});
define("app/boot/start",["module","require","exports","app/boot/app","core/utils","app/ui/navigation_links","app/ui/timelines/dismissible_timeline","app/ui/pushstate_loading_bar","app/ui/start/follow_context","app/data/start/follow_context","app/ui/start/navigation_monitor","app/ui/start/exit_confirm_dialog","app/data/start_flow_scribe","app/data/start/tooltip_scribe","app/ui/typeahead/typeahead_dropdown","app/ui/typeahead/typeahead_input","app/data/who_to_follow","app/data/who_to_follow_scribe","app/data/contact_import","app/data/contact_import_scribe","app/data/users","app/ui/start/preview_timeline","app/data/start/preview_timeline","app/ui/start/preview_timeline_button","app/ui/who_to_follow/import_loading_dialog","app/ui/who_to_follow/import_services","app/ui/contact_import_buttons","app/boot/help_pips_enable"],function(module, require, exports) {
var bootApp=require("app/boot/app"),utils=require("core/utils"),NavigationLinks=require("app/ui/navigation_links"),DismissibleTimeline=require("app/ui/timelines/dismissible_timeline"),PushstateLoadingBar=require("app/ui/pushstate_loading_bar"),FollowContext=require("app/ui/start/follow_context"),FollowContextData=require("app/data/start/follow_context"),NavigationMonitor=require("app/ui/start/navigation_monitor"),ExitConfirmDialog=require("app/ui/start/exit_confirm_dialog"),StartFlowScribe=require("app/data/start_flow_scribe"),StartTooltipScribe=require("app/data/start/tooltip_scribe"),TypeaheadDropdown=require("app/ui/typeahead/typeahead_dropdown"),TypeaheadInput=require("app/ui/typeahead/typeahead_input"),WhoToFollowData=require("app/data/who_to_follow"),WhoToFollowScribe=require("app/data/who_to_follow_scribe"),ContactImportData=require("app/data/contact_import"),ContactImportScribe=require("app/data/contact_import_scribe"),UsersData=require("app/data/users"),PreviewTimeline=require("app/ui/start/preview_timeline"),PreviewTimelineData=require("app/data/start/preview_timeline"),PreviewTimelineButton=require("app/ui/start/preview_timeline_button"),ImportLoadingDialog=require("app/ui/who_to_follow/import_loading_dialog"),ImportServices=require("app/ui/who_to_follow/import_services"),ContactImportButtons=require("app/ui/contact_import_buttons"),enableHelpPips=require("app/boot/help_pips_enable");module.exports=function(b){StartFlowScribe.attachTo(document,{noTeardown:!0}),bootApp(b),StartTooltipScribe.attachTo(document),PushstateLoadingBar.attachTo(document,{modifierClass:"PushstateLoadingBar--light",noTeardown:!0}),NavigationLinks.attachTo(".StartNavigation",{eventData:{scribeContext:{component:"subnav"}}}),TypeaheadInput.attachTo(".StartSearchBox-inputWrapper",{inputSelector:"#welcome-typeahead"}),TypeaheadDropdown.attachTo(".StartSearchBox-inputWrapper",{inputSelector:"#welcome-typeahead",nextElementSelector:".search-btn",accountsShortcutShow:!1,autocompleteAccounts:!1,blockLinkActions:!0,typeaheadSrc:"SEARCH_BOX",datasourceRenders:[["accounts",["accounts"]]],deciders:b.typeaheadData,eventData:{scribeContext:{component:"search",element:"typeahead"}}}),b.enable_nux_pips&&enableHelpPips(),PreviewTimeline.attachTo(".StartPreviewTimelineBtn"),PreviewTimelineButton.attachTo(".StartPreviewTimelineBtn",b),FollowContext.attachTo(".StartFollowContext"),FollowContextData.attachTo(document,{counterName:"interests_follow_counter"}),NavigationMonitor.attachTo(".StartPage"),ExitConfirmDialog.attachTo("#start-exit-dialog"),$(".StartSearchBox-inputWrapper").on("uiTypeaheadItemSelected",function(a,b){$(this).trigger("uiShowProfilePopup",{userId:b.item.id,simple_profile:!0}),$(this).find("input").val("")}),PreviewTimelineData.attachTo(document,utils.merge(b,{endpoint:b.previewTimelineUrl})),ContactImportData.attachTo(document,b),ContactImportScribe.attachTo(document,b),ImportLoadingDialog.attachTo("#import-loading-dialog"),ContactImportButtons.attachTo(".ContactImportButtons"),ImportServices.attachTo(".StartPage",{matchesHref:b.importSuccessUrl,eventData:{scribeContext:{component:"import_service_stream"}}})}
});
define("app/pages/start/opt_in",["module","require","exports","app/boot/start","app/boot/help_pips_enable"],function(module, require, exports) {
var bootStartPages=require("app/boot/start"),enableHelpPips=require("app/boot/help_pips_enable");module.exports=function(b){bootStartPages(b),enableHelpPips()}
});
define("app/ui/wc_select_team",["module","require","exports","core/component"],function(module, require, exports) {
function wcSelectTeam(){this.defaultAttrs({radioButtonSelector:'input[type="radio"]',checkedClass:"StartWCSelectTeam-checked"}),this.change=function(a,b){var c=$(b.el);this.currentlyChecked.removeClass(this.attr.checkedClass),this.currentlyChecked=c.toggleClass(this.attr.checkedClass,c.prop("checked")),c.prop("checked")&&this.trigger("uiWCSelectTeamUpdated",{selectedValue:c.val()})},this.after("initialize",function(){this.currentlyChecked=this.$node.find(this.attr.radioButtonSelector+":checked"),this.on("input change",{radioButtonSelector:this.change})})}var defineComponent=require("core/component");module.exports=defineComponent(wcSelectTeam)
});
define("app/data/start/wc_select_team_scribe",["module","require","exports","core/component","app/data/with_scribe"],function(module, require, exports) {
function wcSelectTeamScribe(){this.defaultAttrs({componentName:"flag"}),this.scribeSelectionUpdated=function(a,b){this.scribe({component:this.attr.componentName,action:"select"},{event_value:b.selectedValue})},this.after("initialize",function(){this.on("uiWCSelectTeamUpdated",this.scribeSelectionUpdated)})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(wcSelectTeamScribe,withScribe)
});
define("app/ui/start/fixed_right_rail",["module","require","exports","core/component","core/utils"],function(module, require, exports) {
function fixedRightRail(){this.defaultAttrs({fixedRailSelector:".FixedRail",offsetRight:20,resizeThrottle:50}),this.reposition=function(){this.resetPosition();var a=this.$node.offset().left-$(window).scrollLeft()+this.originalLeftOffset;this.select("fixedRailSelector").css("left",a)},this.setup=function(){var a=this.select("fixedRailSelector");a.css("top",""),a.css("top",a.offset().top),this.resetPosition(),this.reposition()},this.resetPosition=function(){var a=this.select("fixedRailSelector");a.css({position:"",width:""}),this.originalLeftOffset=a.offset().left-this.$node.offset().left,a.css({position:"fixed",width:a.outerWidth()})},this.after("initialize",function(){this.on(document,"uiSwiftLoaded uiPageChanged",this.setup),this.on(document,"scroll",utils.throttle(this.reposition.bind(this),this.attr.resizeThrottle)),this.on(window,"resize",utils.throttle(this.reposition.bind(this),this.attr.resizeThrottle))})}var defineComponent=require("core/component"),utils=require("core/utils");module.exports=defineComponent(fixedRightRail)
});
define("app/pages/start/wc_select_team",["module","require","exports","app/boot/start","app/ui/wc_select_team","app/data/start/wc_select_team_scribe","app/ui/start/fixed_right_rail"],function(module, require, exports) {
var bootStartPages=require("app/boot/start"),WCSelectTeam=require("app/ui/wc_select_team"),WCSelectTeamScribe=require("app/data/start/wc_select_team_scribe"),StartFixedRightRail=require("app/ui/start/fixed_right_rail");module.exports=function(b){bootStartPages(b),WCSelectTeamScribe.attachTo(".StartWCSelectTeam"),WCSelectTeam.attachTo(".StartWCSelectTeam"),StartFixedRightRail.attachTo("#start-wc-select-team",{fixedRailSelector:".StartHeader-follow"})}
});
define("app/boot/customize_profile",["module","require","exports","app/boot/app","app/data/tweet","app/data/tweet_box_scribe","app/ui/tweet_box_manager"],function(module, require, exports) {
var bootApp=require("app/boot/app"),TweetData=require("app/data/tweet"),TweetBoxScribe=require("app/data/tweet_box_scribe"),TweetBoxManager=require("app/ui/tweet_box_manager");module.exports=function(b){bootApp(b),TweetData.attachTo(document,b),TweetBoxScribe.attachTo(document,b),TweetBoxManager.attachTo(document,b)}
});
define("app/ui/welcome/customize_profile",["module","require","exports","core/component","app/utils/image","app/data/with_scribe","app/utils/scribe_item_types"],function(module, require, exports) {
function customizeProfile(){this.defaultAttrs({nextPageUrl:"/",skipSelector:".tweet-skip-button",avatarSelector:".AvatarTweeter-profilePicture",tweetButtonSelector:".js-tweet-btn",uploadSelector:".AvatarTweeter-photoPrompt"}),this.goTo=function(a){location.href=a},this.handleSkip=function(){this.scribe({component:"customize_profile",action:"skip"}),this.goTo(this.attr.nextPageUrl)},this.nextPage=function(){this.goTo(this.attr.nextPageUrl)},this.avatarUploaded=function(a,b){this.select("uploadSelector").hide(),this.select("avatarSelector").trigger("uiEditProfileEnd"),this.shouldAllowTweet=!0,this.enableTweetButton()},this.disableTweetButton=function(){this.select("tweetButtonSelector").addClass("disabled").attr("disabled",!0)},this.enableTweetButton=function(){this.select("tweetButtonSelector").removeClass("disabled").attr("disabled",!1)},this.handleTweetButtonEnable=function(a,b){this.shouldAllowTweet||this.disableTweetButton()},this.after("initialize",function(){this.on("click",{skipSelector:this.handleSkip}),this.shouldAllowTweet=!1,this.disableTweetButton(),this.on("uiEnableTweetAction",this.handleTweetButtonEnable),this.on("uiImageSave",this.avatarUploaded),this.on(document,"uiTweetboxTweetSuccess dataTweetError",this.nextPage),image.supportsCropper()&&$(document).trigger("uiEditProfileInitialize",{scribeElement:"customize_profile"})})}var defineComponent=require("core/component"),image=require("app/utils/image"),withScribe=require("app/data/with_scribe"),itemTypes=require("app/utils/scribe_item_types");module.exports=defineComponent(customizeProfile,withScribe)
});
define("app/ui/thumbnail_photo_chooser",["module","require","exports","core/component"],function(module, require, exports) {
function thumbnailPhotoChooser(){this.defaultAttrs({thumbnailSelector:"li",imageSrcSelector:"img",selectedDisplaySelector:".js-image-preview",selectedHeaderSelector:".js-header-image-preview",backgroundUrlAttribute:"data-bg-url",webcamSelector:".js-camera",noSubmitSelector:".js-no-submit",checkedClass:"StartWCSelectTeam-checked",doneUrl:null}),this.thumbnailSelected=function(a,b){var c=$(b.el).find(this.attr.imageSrcSelector).attr("src"),d=$(b.el).attr(this.attr.backgroundUrlAttribute);c&&(this.select("selectedDisplaySelector").attr("src",c),this.shouldPost=!$(b.el).is(this.attr.noSubmitSelector)),d&&this.select("selectedHeaderSelector").css("background-image","url("+d+")")},this.newImageAdded=function(a,b){b.fileData&&(this.select("selectedDisplaySelector").attr("src","data:image/png;base64,"+b.fileData),this.select("thumbnailSelector").find("input").prop("checked",!1).removeClass(this.attr.checkedClass),this.shouldPost=!1)},this.webcamUploadClick=function(a,b){this.trigger("uiCropperWebcam",{uploadType:"avatar"})},this.handleSubmit=function(a,b){this.shouldPost||(a.preventDefault(),this.attr.doneUrl&&this.trigger("uiNavigate",{href:this.attr.doneUrl}))},this.after("initialize",function(){this.shouldPost=!1,this.on("click",{thumbnailSelector:this.thumbnailSelected,webcamSelector:this.webcamUploadClick}),this.on("submit",this.handleSubmit),this.on(document,"uiImageSave",this.newImageAdded)})}var defineComponent=require("core/component");module.exports=defineComponent(thumbnailPhotoChooser)
});
define("app/pages/start/setup_profile",["module","require","exports","app/boot/start","app/boot/customize_profile","app/boot/inline_edit","app/ui/wc_select_team","app/data/start/wc_select_team_scribe","app/utils/image","app/ui/welcome/customize_profile","app/ui/thumbnail_photo_chooser"],function(module, require, exports) {
var bootStartPages=require("app/boot/start"),customizeProfileBoot=require("app/boot/customize_profile"),inlineEditBoot=require("app/boot/inline_edit"),SelectTeam=require("app/ui/wc_select_team"),SelectTeamScribe=require("app/data/start/wc_select_team_scribe"),image=require("app/utils/image"),CustomizeProfile=require("app/ui/welcome/customize_profile"),ThumbnailPhotoChooser=require("app/ui/thumbnail_photo_chooser");module.exports=function(b){bootStartPages(b),customizeProfileBoot(b),inlineEditBoot(b),SelectTeamScribe.attachTo(".StartWCSelectTeam",{componentName:"avatar"}),SelectTeam.attachTo(".StartWCSelectTeam"),ThumbnailPhotoChooser.attachTo("form.StartPage-module",{selectedDisplaySelector:".js-action-profile-avatar",doneUrl:b.nextPageUrl}),image.supportsCropper()&&using("css!"+b.profileEditingCSSBundle,function(){})}
});
define("app/ui/account_create_event_ga",["module","require","exports","core/component"],function(module, require, exports) {
function acctCreate(){this.trackAcctCreate=function(){this.trigger("GATrackEvent",{gaEvent:"account-create"})},this.after("initialize",function(){this.on("uiSwiftLoaded",this.trackAcctCreate)})}var defineComponent=require("core/component"),AcctCreateGA=defineComponent(acctCreate);module.exports=AcctCreateGA
});
define("app/ui/macaw_nymizer_signup_conversion",["module","require","exports","core/component"],function(module, require, exports) {
function macawNymizerSignupConversion(){this.signupConversion=function(){this.trigger("MNConversion",{mnType:"signup"})},this.after("initialize",function(){this.on("uiSwiftLoaded",this.signupConversion)})}var defineComponent=require("core/component"),MacawNymizerSignupConversion=defineComponent(macawNymizerSignupConversion);module.exports=MacawNymizerSignupConversion
});
define("app/pages/start/import",["module","require","exports","app/boot/start","app/ui/account_create_event_ga","app/ui/macaw_nymizer_signup_conversion"],function(module, require, exports) {
var bootStartPages=require("app/boot/start"),AcctCreateGA=require("app/ui/account_create_event_ga"),MacawNymizerSignupConversion=require("app/ui/macaw_nymizer_signup_conversion");module.exports=function(b){bootStartPages(b),AcctCreateGA.attachTo(document),MacawNymizerSignupConversion.attachTo(document)}
});
define("app/ui/start/home_popover",["module","require","exports","core/component","core/utils","core/i18n"],function(module, require, exports) {
function HomePopover(){this.defaultAttrs({hideDelay:5e3,homeNavSelector:".StartPreviewTimelineBtn",contentSelector:".HomeNavPopover-content",arrowSelector:".HomeNavPopover-arrow",resizeThrottle:50}),this.displayPopoverContent=function(a,b){if(this.currentShowIsForced)return;this.select("contentSelector").html(b.html),this.currentShowIsForced=b.forceFullDuration;if(!this.timeout){var c=this.getLeftHomePosition();this.$node.removeClass("fadingOut"),this.$node.css({animation:"",top:"-50px",left:c,opacity:1}),this.$node.show(),this.noAnimationSupport?this.$node.css({"z-index":1001,top:"47px"}):this.$node.css("animation","underOverNavBar .7s both linear")}this.resetTimeout()},this.reposition=function(){this.$node.css("left",this.getLeftHomePosition())},this.getLeftHomePosition=function(){return $(this.attr.homeNavSelector).offset().left},this.hidePopover=function(){this.currentShowIsForced||this.forceHidePopover()},this.forceHidePopover=function(){this.timeout=null,this.currentShowIsForced=!1,this.usersShowing=[],this.$node.addClass("fadingOut"),this.$node.css("opacity",0),this.trigger("uiHomePopoverHidden")},this.resetTimeout=function(){this.timeout&&window.clearInterval(this.timeout),this.timeout=setTimeout(this.forceHidePopover.bind(this),this.attr.hideDelay)},this.after("initialize",function(){this.noAnimationSupport=$.browser.msie&&parseInt($.browser.version,10)<=9,$.browser.msie&&parseInt($.browser.version,10)<=8&&this.select("arrowSelector").remove(),this.on(document,"uiHideHomePopover",this.hidePopover),this.on(document,"uiShowHomePopover",this.displayPopoverContent),this.on(window,"resize",utils.throttle(this.reposition.bind(this),this.attr.resizeThrottle))})}var defineComponent=require("core/component"),utils=require("core/utils"),_=require("core/i18n"),HomePopover=defineComponent(HomePopover);module.exports=HomePopover
});
define("app/ui/timelines/wtf_user_timeline",["module","require","exports","core/component","app/ui/timelines/user_timeline","app/ui/timelines/with_load_more_pagination","app/ui/select_all"],function(module, require, exports) {
function wtfUserTimeline(){this.defaultAttrs({useExcludedIdsPagination:!0,excludedUserSelector:".js-actionable-user",checkboxSelector:'li input[type="checkbox"]',selectAllSelector:".js-select-all input"}),this.onSelectionChange=function(a,b){this.trigger("uiFollowAllUserSelectionChanged",{count:b.numSelected})},this.updateSelection=function(a,b){this.select("checkedSelectAllSelector").length>0&&this.trigger("uiSelectAllReload")},this.collectAllUserIds=function(){var a=this.select("checkedCheckboxSelector").map(function(){return $(this).closest("[data-user-id]").data("user-id")}).toArray();this.trigger("uiHasFollowAllUserIds",{userIds:a})},this.after("initialize",function(){this.attr.checkedCheckboxSelector=this.attr.checkboxSelector+":checked",this.attr.checkedSelectAllSelector=this.attr.selectAllSelector+":checked",SelectAll.attachTo(this.$node,{checkboxSelector:this.attr.checkboxSelector,selectAllSelector:this.attr.selectAllSelector}),this.on("uiListSelectionChanged",this.onSelectionChange),this.on("uiWantsFollowAllUsersIds",this.collectAllUserIds),this.on("uiHasInjectedOldTimelineItems",this.updateSelection)})}var defineComponent=require("core/component"),UserTimeline=require("app/ui/timelines/user_timeline"),withLoadMorePagination=require("app/ui/timelines/with_load_more_pagination"),SelectAll=require("app/ui/select_all");module.exports=UserTimeline.mixin(wtfUserTimeline,withLoadMorePagination)
});
define("app/ui/start/with_dismissible_timeline_follow_all",["module","require","exports"],function(module, require, exports) {
function withDismissibleTimelineFollowAll(){this.collectAllUserIds=function(a,b){var c=this.select("genericItemSelector").map(function(a,b){return this.getUserIdFromStreamItem($(b))}.bind(this)).toArray();this.trigger("uiHasFollowAllUserIds",{userIds:c})},this.onRecommendationChanged=function(a,b){this.trigger("uiFollowAllUserSelectionChanged",{count:this.select("genericItemSelector").length})},this.after("initialize",function(){this.on(document,"uiWantsFollowAllUsersIds",this.collectAllUserIds),this.on(document,"uiSwiftLoaded uiPageChanged uiDidDismissUserRecommendation uiHasInjectedOldTimelineItems",this.onRecommendationChanged)})}module.exports=withDismissibleTimelineFollowAll
});
define("app/data/welcome/second_session_follow",["module","require","exports","core/component","app/data/with_data","app/utils/scribe_item_types"],function(module, require, exports) {
function secondSessionFollow(){this.executeMultiFollow=function(a,b){if(!b.ids||b.ids.length==0){this.trigger("dataFollowAllSuccess",{result:{followed:[],requested:[]}});return}this.post({url:"/welcome/follow_all_friends",headers:{"X-Phx":!0},data:{user_ids:b.ids},success:"dataFollowAllSuccess",error:"dataFollowAllFailure"})},this.after("initialize",function(a,b){this.on("uiFollowAllFriends",this.executeMultiFollow)})}var defineComponent=require("core/component"),withData=require("app/data/with_data"),itemTypes=require("app/utils/scribe_item_types");module.exports=defineComponent(secondSessionFollow,withData)
});
define("app/ui/start/fixed_scroll_header",["module","require","exports","core/component","core/utils"],function(module, require, exports) {
function fixedScrollHeader(){this.defaultAttrs({headerSelector:".FixedScrollHeader-header",maskClassSelector:".FixedScrollHeader-mask",fillClassSelector:".FixedScrollHeader-fill",maskHeight:20,scrollOffsetTop:66,scrollOffsetBuffer:5,scrollThrottle:50,zIndex:1}),this.checkHorizontalAlignment=function(){if(!this.isFixed)return;var a=this.$node.offset().left-$(window).scrollLeft()+this.originalLeftOffset;this.$header.css("left",a),this.select("maskClassSelector").css("left",a)},this.checkScrollPosition=function(){var a=this.getHeaderOffset()<this.scrollOffsetTop()+this.attr.scrollOffsetBuffer;a?this.setFixedHeader():this.isFixed&&this.removeFixedHeader()},this.getHeaderOffset=function(){var a=this.isFixed?this.select("fillClassSelector"):this.select("headerSelector");return a.offset().top-$(window).scrollTop()},this.setFixedHeader=function(){if(this.isFixed){this.checkHorizontalAlignment();return}var a={width:this.$header.width(),top:this.getHeaderOffset(),left:this.$header.offset().left,marginTop:0,position:"fixed",zIndex:this.attr.zIndex};this.isFixed=!0,this.createFill(),this.$header.css(a),setTimeout(function(){this.$header.css("top",this.scrollOffsetTop())}.bind(this),0),this.createMask()},this.createFill=function(){this.$header.after('<div class="'+this.attr.fillClassSelector.replace(".","")+'"></div>'),this.select("fillClassSelector").css({height:this.$header.outerHeight(),marginTop:this.$header.css("margin-top"),marginBottom:this.$header.css("margin-bottom")})},this.createMask=function(){this.$header.before('<div class="'+this.attr.maskClassSelector.replace(".","")+'"></div>'),this.select("maskClassSelector").css({height:this.attr.maskHeight,top:this.scrollOffsetTop()-this.attr.maskHeight,width:this.$header.outerWidth(),left:this.$header.offset().left,position:"fixed",backgroundColor:this.$header.css("background-color"),zIndex:this.attr.zIndex})},this.removeFixedHeader=function(){this.isFixed=!1,this.select("headerSelector").css({width:"",top:"",left:"",paddingTop:"",marginTop:"",zIndex:"",position:""}),this.select("maskClassSelector").remove(),this.select("fillClassSelector").remove()},this.scrollOffsetTop=function(){return $.isFunction(this.attr.scrollOffsetTop)?this.attr.scrollOffsetTop():this.attr.scrollOffsetTop},this.after("initialize",function(){this.isFixed=!1,this.$header=this.select("headerSelector"),this.originalLeftOffset=this.$header.offset().left-this.$node.offset().left,this.on(document,"uiSwiftLoaded uiPageChanged",this.checkScrollPosition),this.on(document,"scroll",utils.throttle(this.checkScrollPosition.bind(this),this.attr.scrollThrottle)),this.on(window,"resize",utils.throttle(this.checkHorizontalAlignment.bind(this),this.attr.scrollThrottle)),this.checkScrollPosition()})}var defineComponent=require("core/component"),utils=require("core/utils");module.exports=defineComponent(fixedScrollHeader)
});
define("app/data/select_all_scribe",["module","require","exports","core/component","app/data/with_scribe"],function(module, require, exports) {
function selectAllScribe(){this.defaultAttrs({checkboxSelector:'.contact-select-box input[type="checkbox"]',selectAllSelector:'.content-header input[type="checkbox"]',eventData:{scribeContext:{component:"select_all"}}}),this.scribeCheckboxSelection=function(a,b){this.scribeCheck($(a.target),"checkbox")},this.scribeSelectAllSelection=function(a,b){this.scribeCheck($(a.target),"select_all_checkbox")},this.scribeCheck=function(a,b){var c=a.is(":checked")?"checked":"unchecked",d=a.attr("value");this.scribe({element:b,action:c},this.attr.eventData,{event_value:d})},this.after("initialize",function(){this.on("change",{checkboxSelector:this.scribeCheckboxSelection,selectAllSelector:this.scribeSelectAllSelection})})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(selectAllScribe,withScribe)
});
define("app/data/start/timeline_scribe",["module","require","exports","core/component","app/data/with_scribe"],function(module, require, exports) {
function timelineScribe(){this.defaultAttrs({selectAllSelector:".js-select-all"}),this.scribeFollowAll=function(a,b){var c=this.select("selectAllSelector");if(c.length>0){var d=c.is(":checked")?"checked":"unchecked";this.scribe({component:"follow_all",element:"select_all_checkbox",action:d})}},this.scribeLoadMore=function(a,b){this.scribe({component:"load_more",action:"click"})},this.after("initialize",function(){this.on(document,"uiLoadMoreClicked",this.scribeLoadMore),this.on(document,"uiFollowAllFriends",this.scribeFollowAll)})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(timelineScribe,withScribe)
});
define("app/ui/start/follow_all_button",["module","require","exports","core/component","core/utils","core/i18n","template"],function(module, require, exports) {
function followAllButton(){this.defaultAttrs({redirectUrl:"/",templatePath:null}),this.updateFollowButton=function(a,b){if(this.attr.templatePath){var b={num_users_selected:b.count};this.$node.html(template[this.attr.templatePath].render(b,template))}},this.requestFollowAllUserIds=function(a,b){this.$node.prop("disabled",!0),this.trigger("uiWantsFollowAllUsersIds")},this.followAllUserIds=function(a,b){this.trigger("uiFollowAllFriends",{ids:b.userIds})},this.onFollowAllSuccess=function(a,b){this.trigger("uiNavigate",{href:this.attr.redirectUrl})},this.onFollowAllError=function(a,b){this.$node.prop("disabled",!1),this.trigger("uiShowMessage",{message:_('\u7533\u3057\u8a33\u3042\u308a\u307e\u305b\u3093\u3002\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u3002\u518d\u5ea6\u3001\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002')})},this.after("initialize",function(){this.$node.prop("disabled",!1),this.on("click",this.requestFollowAllUserIds),this.on(document,"uiHasFollowAllUserIds",this.followAllUserIds),this.on(document,"dataFollowAllSuccess",this.onFollowAllSuccess),this.on(document,"dataFollowAllFailure",this.onFollowAllError),this.on(document,"uiFollowAllUserSelectionChanged",this.updateFollowButton)})}var defineComponent=require("core/component"),utils=require("core/utils"),_=require("core/i18n"),template=require("template");module.exports=defineComponent(followAllButton)
});
define("app/pages/start/find_friends",["module","require","exports","app/boot/start","app/boot/timeline","app/ui/start/home_popover","app/ui/start/exit_confirm_dialog","app/ui/timelines/wtf_user_timeline","app/ui/timelines/dismissible_timeline","app/ui/start/with_dismissible_timeline_follow_all","app/data/welcome/second_session_follow","app/ui/start/fixed_right_rail","app/ui/start/fixed_scroll_header","app/data/select_all_scribe","app/data/start/timeline_scribe","app/ui/start/follow_all_button","app/data/who_to_follow","app/data/who_to_follow_scribe","app/data/users","core/utils"],function(module, require, exports) {
var bootStartPages=require("app/boot/start"),timelineBoot=require("app/boot/timeline"),HomePopover=require("app/ui/start/home_popover"),ExitConfirmDialog=require("app/ui/start/exit_confirm_dialog"),WtfUserTimeline=require("app/ui/timelines/wtf_user_timeline"),DismissibleTimeline=require("app/ui/timelines/dismissible_timeline"),withDismissibleTimelineFollowAll=require("app/ui/start/with_dismissible_timeline_follow_all"),SecondSessionFollowData=require("app/data/welcome/second_session_follow"),StartFixedRightRail=require("app/ui/start/fixed_right_rail"),StartFixedScrollHeader=require("app/ui/start/fixed_scroll_header"),SelectAllScribe=require("app/data/select_all_scribe"),StartTimelineScribe=require("app/data/start/timeline_scribe"),StartFollowAllButton=require("app/ui/start/follow_all_button"),WhoToFollowData=require("app/data/who_to_follow"),WhoToFollowScribe=require("app/data/who_to_follow_scribe"),UsersData=require("app/data/users"),utils=require("core/utils");module.exports=function(b){bootStartPages(b),timelineBoot(utils.merge(b,{endpoint:b.timeline_url,no_global_infinite_scroll:!0})),WhoToFollowScribe.attachTo(document),WhoToFollowData.attachTo(document),StartFollowAllButton.attachTo(".btn-follow-all",{redirectUrl:b.redirect_url,templatePath:"start/wtf_follow_button"}),StartFixedScrollHeader.attachTo(".StartFindFriends-content",{headerSelector:".StartFindFriends-timelineHeader",scrollOffsetTop:function(){return $(window).width()<=1010?10:$(".StartNavigation").height()+30},maskHeight:30,zIndex:2}),b.isTweetForward?DismissibleTimeline.mixin(withDismissibleTimelineFollowAll).attachTo("#start-find-friends-timeline",{itemType:"tweet",loggedIn:b.loggedIn,showSimpleProfilePopup:!0,loadMoreSelector:".StartFindFriends-loadMore",eventData:{scribeContext:{component:"user"}}}):(WtfUserTimeline.attachTo("#start-find-friends-timeline",{loggedIn:b.loggedIn,showSimpleProfilePopup:!0,checkboxSelector:'.contact-select-box input[type="checkbox"]',selectAllSelector:'.StartFindFriends-timelineHeader input[type="checkbox"]',loadMoreSelector:".StartFindFriends-loadMore",eventData:{scribeContext:{component:"user"}}}),SelectAllScribe.attachTo("#start-find-friends-timeline",{checkboxSelector:'.contact-select-box input[type="checkbox"]',selectAllSelector:'.StartFindFriends-timelineHeader input[type="checkbox"]'})),StartFixedRightRail.attachTo("#start-find-friends-timeline",{fixedRailSelector:".StartHeader-follow"}),SecondSessionFollowData.attachTo(document),UsersData.attachTo(document),StartTimelineScribe.attachTo(document,{selectAllSelector:'.StartFindFriends-timelineHeader input[type="checkbox"]'})}
});
define("app/data/start/follow_context_proxy",["module","require","exports","core/component"],function(module, require, exports) {
function followContextProxy(){this.triggerProxyEvent=function(a,b){this.trigger("dataFollowContextProxyChange",b)},this.after("initialize",function(){this.on("dataFollowStateChange",this.triggerProxyEvent)})}var defineComponent=require("core/component");module.exports=defineComponent(followContextProxy)
});
define("app/pages/start/interests",["module","require","exports","app/boot/start","app/data/client_event","app/data/start/follow_context_proxy","app/ui/navigation_links","app/ui/timelines/dismissible_timeline","app/data/who_to_follow","app/data/who_to_follow_scribe","app/data/users"],function(module, require, exports) {
var bootStartPages=require("app/boot/start"),clientEvent=require("app/data/client_event"),FollowContextProxyData=require("app/data/start/follow_context_proxy"),NavigationLinks=require("app/ui/navigation_links"),DismissibleTimeline=require("app/ui/timelines/dismissible_timeline"),WhoToFollowData=require("app/data/who_to_follow"),WhoToFollowScribe=require("app/data/who_to_follow_scribe"),UsersData=require("app/data/users");module.exports=function(b){bootStartPages(b),clientEvent.scribeData.query=b.sul_id,NavigationLinks.attachTo(".StartInterestNav, .BlockGrid",{eventData:{scribeContext:{component:"suls"}}}),FollowContextProxyData.attachTo(document),WhoToFollowScribe.attachTo(document),WhoToFollowData.attachTo(document),UsersData.attachTo(document),DismissibleTimeline.attachTo("#stream-items-id",{itemType:"tweet",loggedIn:b.loggedIn,showSimpleProfilePopup:!0,eventData:{scribeContext:{component:"user"}}})}
});
define("app/pages/start/first_tweet",["module","require","exports","app/boot/start","app/boot/inline_edit","app/data/tweet","app/data/tweet_box_scribe","app/ui/tweet_box_manager"],function(module, require, exports) {
var bootStartPages=require("app/boot/start"),inlineEditBoot=require("app/boot/inline_edit"),TweetData=require("app/data/tweet"),TweetBoxScribe=require("app/data/tweet_box_scribe"),TweetBoxManager=require("app/ui/tweet_box_manager");module.exports=function(b){bootStartPages(b),inlineEditBoot(b),TweetData.attachTo(document,b),TweetBoxScribe.attachTo(document,b),TweetBoxManager.attachTo(document,b),$(".StartFirstTweet .tweet-form").trigger("uiInitTweetbox",{condenseable:!1,preventTweetingDefaultText:!1,immediatelyParseTweetText:!0,eventData:{scribeContext:{component:"first_tweet_box"}}}),$(document).on("uiTweetboxTweetSuccess dataTweetError",function(){$(this).trigger("uiNavigate",{href:b.nextPage})})}
});
define("app/ui/start/select_interests",["module","require","exports","core/component","app/data/with_scribe"],function(module, require, exports) {
function selectInterests(){this.defaultAttrs({checkedInputSelector:"input:checked",itemSelector:".StartCheckboxList-item"}),this.handleSubmit=function(a,b){a.preventDefault();var c=this.select("checkedInputSelector").map(function(a,b){return $(b).closest(this.attr.itemSelector)}.bind(this));c.length>0?this.scribe({component:"progress",action:"done"},{items:this.mapScribeItemsFromDOMItems(c).toArray(),item_count:c.length,event_value:c.length}):this.scribe({component:"progress",action:"skip"}),this.trigger("uiNavigate",{href:this.getSubmitUrl()})},this.mapScribeItemsFromDOMItems=function(a){return a.map(function(a,b){return{id:$(b).find(this.attr.checkedInputSelector).val(),name:$(b).text().trim(),position:a}}.bind(this))},this.getSubmitUrl=function(){var a=this.$node.attr("action"),b=this.$node.serialize();return b?a+"?"+b:a},this.after("initialize",function(){this.on("submit",this.handleSubmit)})}var defineComponent=require("core/component"),withScribe=require("app/data/with_scribe");module.exports=defineComponent(selectInterests,withScribe)
});
define("app/pages/start/interest_list",["module","require","exports","app/boot/start","app/data/select_all_scribe","app/ui/start/fixed_right_rail","app/ui/start/select_interests","app/ui/account_create_event_ga"],function(module, require, exports) {
var bootStartPages=require("app/boot/start"),SelectAllScribe=require("app/data/select_all_scribe"),StartFixedRightRail=require("app/ui/start/fixed_right_rail"),StartSelectInterests=require("app/ui/start/select_interests"),AcctCreateGA=require("app/ui/account_create_event_ga");module.exports=function(b){bootStartPages(b),AcctCreateGA.attachTo(document),StartSelectInterests.attachTo(".StartCheckboxList"),SelectAllScribe.attachTo(".StartCheckboxList",{checkboxSelector:'input[type="checkbox"]',eventData:{scribeContext:{component:"select_interests"}}}),StartFixedRightRail.attachTo(".StartCheckboxList",{fixedRailSelector:".StartHeader-follow"})}
});
define("app/pages/start/congratulations_splash",["module","require","exports","app/boot/start","app/ui/account_create_event_ga"],function(module, require, exports) {
var bootStartPages=require("app/boot/start"),AcctCreateGA=require("app/ui/account_create_event_ga");module.exports=function(b){bootStartPages(b),AcctCreateGA.attachTo(document)}
});